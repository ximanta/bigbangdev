import React, { useState, useEffect } from 'react';import ToggleSwitch from '../components/ToggleSwitch.jsx';import Card from '../components/Card.jsx';import Button from '../components/Button.jsx';import InputField from '../components/InputField.jsx';import DropdownSelector from '../components/DropdownSelector.jsx';import { useToast } from '../context/ToastContext.jsx';const ReminderFormModal = ({ onClose, onSave, reminderToEdit }) => {const [plantName, setPlantName] = useState(reminderToEdit?.plantName || '');const [type, setType] = useState(reminderToEdit?.type || 'Watering');const [date, setDate] = useState(reminderToEdit?.date || '');const [time, setTime] = useState(reminderToEdit?.time || '');const [frequency, setFrequency] = useState(reminderToEdit?.frequency || 'daily');const modalOverlayStyle = {position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1001};const modalContentStyle = {backgroundColor:'white',padding:'20px',borderRadius:'8px',width:'90%',maxWidth:'400px',boxShadow:'0 4px 8px rgba(0,0,0,0.2)',maxHeight:'80vh',overflowY:'auto'};const buttonContainerStyle = {display:'flex',justifyContent:'flex-end',marginTop:'20px',gap:'10px'};const reminderTypeOptions = [{value:'Watering',label:'Watering'},{value:'Fertilizing',label:'Fertilizing'},{value:'Pruning',label:'Pruning'},{value:'Repotting',label:'Repotting'},{value:'Pest Check',label:'Pest Check'},{value:'Other',label:'Other'}];const frequencyOptions = [{value:'daily',label:'Daily'},{value:'weekly',label:'Weekly'},{value:'bi-weekly',label:'Bi-Weekly'},{value:'monthly',label:'Monthly'},{value:'custom',label:'Custom (requires date/time)'}];return(<div style={modalOverlayStyle}><div style={modalContentStyle}><h2 style={{marginTop:0,color:'#333'}}>{reminderToEdit ? 'Edit Reminder' : 'Add New Reminder'}</h2><InputField label="Plant Name" value={plantName} onChange={(e) => setPlantName(e.target.value)} placeholder="e.g., Rose Bush" /><DropdownSelector label="Reminder Type" options={reminderTypeOptions} value={type} onChange={(e) => setType(e.target.value)} /><DropdownSelector label="Frequency" options={frequencyOptions} value={frequency} onChange={(e) => setFrequency(e.target.value)} /><InputField label="Date" type="date" value={date} onChange={(e) => setDate(e.target.value)} /><InputField label="Time" type="time" value={time} onChange={(e) => setTime(e.target.value)} /><div style={buttonContainerStyle}><Button variant="secondary" onClick={onClose}>Cancel</Button><Button onClick={() => onSave({ id: reminderToEdit?.id || Date.now().toString(), plantName, type, date, time, frequency, active: reminderToEdit?.active ?? true })} disabled={!plantName || !date || !time}>{reminderToEdit ? 'Save Changes' : 'Add Reminder'}</Button></div></div></div>);};const RemindersPage = () => {const [reminders, setReminders] = useState(() => {const savedReminders = localStorage.getItem('gardening-app-reminders');return savedReminders ? JSON.parse(savedReminders) : [];});const [showModal, setShowModal] = useState(false);const [editingReminder, setEditingReminder] = useState(null);const { showToast } = useToast();useEffect(() => {localStorage.setItem('gardening-app-reminders', JSON.stringify(reminders));}, [reminders]);const handleAddOrUpdateReminder = (newReminder) => {if (newReminder.id && reminders.find(r => r.id === newReminder.id)) {setReminders(reminders.map((r) => (r.id === newReminder.id ? newReminder : r)));showToast('Reminder updated successfully!', 'success');} else {setReminders([...reminders, newReminder]);showToast('Reminder added successfully!', 'success');}setShowModal(false);setEditingReminder(null);};const handleToggleReminder = (id) => {setReminders(reminders.map((r) => (r.id === id ? { ...r, active: !r.active } : r)));};const handleDeleteReminder = (id) => {setReminders(reminders.filter((r) => r.id !== id));showToast('Reminder deleted.', 'info');};const handleEditClick = (reminder) => {setEditingReminder(reminder);setShowModal(true);};const reminderCardStyle = {marginBottom:'10px'};const reminderContentStyle = {display:'flex',justifyContent:'space-between',alignItems:'center'};const reminderTextStyle = {flexGrow:1};const reminderTitleStyle = {fontWeight:'bold',fontSize:'1.1em',marginBottom:'4px'};const reminderDetailStyle = {fontSize:'0.9em',color:'#555'};const actionsStyle = {display:'flex',gap:'5px',marginLeft:'10px'};return(<div className="container"><h1 style={{color:'#333',marginBottom:'20px'}}>Reminders</h1>{reminders.length === 0 ? (<div className="no-items-message">No reminders set. Click 'Add Reminder' to create one!</div>) : (<div>{reminders.map((reminder) => (<Card key={reminder.id} style={reminderCardStyle}><div style={reminderContentStyle}><div style={reminderTextStyle}><div style={reminderTitleStyle}>{reminder.plantName} - {reminder.type}</div><div style={reminderDetailStyle}>{reminder.frequency === 'custom' ? `${reminder.date} at ${reminder.time}` : `${reminder.frequency}, ${reminder.time}`}</div></div><div style={actionsStyle}><ToggleSwitch checked={reminder.active} onChange={() => handleToggleReminder(reminder.id)} /><Button variant="secondary" onClick={() => handleEditClick(reminder)} style={{padding:'6px 10px',fontSize:'0.8em'}}>Edit</Button><Button onClick={() => handleDeleteReminder(reminder.id)} style={{padding:'6px 10px',fontSize:'0.8em',backgroundColor:'#f44336'}}>Delete</Button></div></div></Card>))}</div>)}<Button onClick={() => {setEditingReminder(null);setShowModal(true);}} style={{marginTop:'20px',width:'100%'}}>Add Reminder</Button>{showModal && (<ReminderFormModal onClose={() => setShowModal(false)} onSave={handleAddOrUpdateReminder} reminderToEdit={editingReminder} />)}</div>);};export default RemindersPage;